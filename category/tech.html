<!DOCTYPE html>
<html lang="en">

<head>
      <link rel="stylesheet" type="text/css" href="https://virantha.com/theme/css/style.css">

  <link rel="stylesheet" type="text/css" href="https://virantha.com/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans|PT+Serif|Ubuntu+Mono">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
  <!---
  <link rel="stylesheet" type="text/css" href="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css">
  <link rel="stylesheet" href="/theme/tipuesearch/tipuesearch.css">
  -->
  
  <link rel="stylesheet" href="https://cdn.datatables.net/2.1.8/css/dataTables.dataTables.css" />
    
  <script src="https://code.jquery.com/jquery-3.7.1.min.js""></script>
  <script src="https://cdn.datatables.net/2.1.8/js/dataTables.js"></script>

  <link rel="stylesheet" href="https://files.stork-search.net/releases/v1.6.0/edible.css" />


  <meta charset="utf-8" />
  <meta name="viewport" id="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Virantha Ekanayake">
  <meta name="description" content="Technical writings by Virantha Ekanayake">

  <link rel="author" href="https://plus.google.com/+ViranthaEkanayake/?rel=author">



  <title>
Category: Tech | Virantha Namal Ekanayake  </title>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45383503-1', 'virantha.com');
  ga('send', 'pageview');
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="https://virantha.com">
        <img src="http://localhost:8000/images/static/veezer_mini.jpg" alt="logo" id="logo">
      </a>
      <h2><a href="https://virantha.com" class="nohover">Virantha Ekanayake</a></h2>
      <p>Technology * Python * FPGAs * Semiconductors * Startups
      
      <div>
          <ul>


            <li><a data-email="moc.liamg@ahtnariv:otliam" title="You need javascript enabled to view this email" href="#" class="ext-links email" target="_blank">Email<i class="fa fa-envelope"></i></a></li>



            
            <li><a href="https://twitter.com/virantha" target="_blank"><span class="ext-links">Twitter</span><i class="fa fa-twitter "></i></a></li>



            
            <li><a href="https://www.linkedin.com/pub/virantha-ekanayake/1a/a4b/56" target="_blank"><span class="ext-links">Linkedin</span><i class="fa fa-external-link-square "></i></a></li>



            
            <li><a href="https://github.com/virantha" target="_blank"><span class="ext-links">GitHub</span><i class="fa fa-github "></i></a></li>
            <br>
        </div>

        
      </ul>
    </div>
  </aside>

  <main id="main">
    <header>
      <p id="header">
      
      </p>
<div class='nav-class'>

    <ul>
        <li>
            <a id='head' href="https://virantha.com">Home</a> &#124; 
            <ul>
                <li><a href='https://virantha.com/blog.html'>All posts</a></li>
                <li><a href='https://virantha.com/tags.html'>Tags</a></li>
            </ul>
        </li>
                <li><a href=#'>Projects</a>
                <ul>                        <li><a href="https://virantha.com/category/pypdfocr.html"> PyPDFOCR </a> </li>
                        <li><a href="https://virantha.com/category/airframe.html"> AirFrame </a> </li>
                        <li><a href="https://virantha.com/category/scanpdf.html"> ScanPDF </a> </li>
                        <li><a href="https://virantha.com/category/oneresume.html"> OneResumé </a> </li>
                        <li><a href="https://virantha.com/category/fundsgather.html"> FundsGather </a> </li>
                        <li><a href="https://virantha.com/category/photokeeper.html"> PhotoKeeper </a> </li>
                        <li><a href="https://virantha.com/category/bricknil.html"> BrickNil </a> </li>
                </ul>
                </li>
                <li><a href="https://virantha.com/category/tech.html"> Tech notes </a> </li>
                <li><a href="https://virantha.com/category/snippets.html"> Snippets </a> </li>
                <li><a href="https://virantha.com/category/diy.html"> DIY </a> </li>
                <li><a href="https://virantha.com/category/shopping.html"> Shopping </a> </li>
                    <!--
                    <div class="stork-wrapper-edible">
                        <input data-stork="federalist-edible" class="stork-input" />
                        <div data-stork="federalist-edible-output" class="stork-output"></div>
                    </div>
                    -->
                    
    </ul>
</div>
<p>Section: Tech
</p>
    </header>

<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>01 <span>Apr</span></p>
        </div>
        <a href="https://virantha.com/2021/04/01/edgeos-dnsmasq-client-specific-dns-dhcp/">Client-specific DNS and DHCP settings with Dnsmasq and Edgeos / Edgerouter</a>
    </h1>
  </div>
  <div class="article_text">
    <p>I have my Edgerouter configured to hand out static leases for all my network clients using
Dnsmasq, which also automatically puts an entry into the DNS with the client name.  The
Edgeos configuration for this is relatively straightforward:</p>
<div class="highlight"><pre><span></span><span class="err">dhcp</span><span class="mi">-</span><span class="err">server</span><span class="w"> </span><span class="p">{</span>
<span class="err">...</span>
<span class="w">    </span><span class="err">shared</span><span class="mi">-</span><span class="kc">net</span><span class="err">work</span><span class="mi">-</span><span class="kc">na</span><span class="err">me</span><span class="w"> </span><span class="err">LAN</span><span class="mi">1</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="err">au</span><span class="kc">t</span><span class="err">hori …</span></pre></div>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>04 <span>Apr</span></p>
        </div>
        <a href="https://virantha.com/2019/04/04/lego-spike-prime-compared/">LEGO®'s new SPIKE Prime BluetoothLE Controlled Robotics Kit</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Updated 4/9/19 with some new information regarding the sensors from newly available datasheets.</p>
<script>
                $(document).ready( function () { 
                    $('#comparison').DataTable( { layout:
                     {
                        topStart: null,
                        topEnd: null,
                        bottom: null,
                        bottomStart: 'info',
                        bottomEnd: 'paging'
                        }
                    }); 
                    } );</script></div>
<div class="contents topic" id="table-of-contents">
<p class="topic-title"><a class="reference internal" href="#top">Table of Contents</a></p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#overview" id="toc-entry-1">1   Overview</a></li>
<li><a class="reference internal" href="#comparison-with-boost-and-poweredup-sets" id="toc-entry-2">2   Comparison with Boost and PoweredUp Sets</a></li>
<li><a class="reference internal" href="#external-community-links" id="toc-entry-3">3   External community links</a></li>
</ul>
</div>
<p>Lego® just …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>30 <span>Mar</span></p>
        </div>
        <a href="https://virantha.com/2019/03/30/raspberry-pi-setup-with-ansible-python-37/">Setting up a Raspberry Pi with Python 3.7+ using Ansible</a>
    </h1>
  </div>
  <div class="article_text">
    <p>Here's a set of <a class="reference external" href="https://www.ansible.com/resources/get-started">Ansible</a> playbook files to do an unattended compile of Python 3.7+ with SSL on a
headless wifi-connected Raspberry Pi.  A recent project of mine (<a class="reference external" href="https://virantha.github.io/bricknil">bricknil</a>) uses 3.7, and
it was a little frustrating to get the default 3.5 upgraded on my Raspbian image …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>28 <span>Sep</span></p>
        </div>
        <a href="https://virantha.com/2017/09/28/hardware-simulation-using-curio-3/">Part 3 - Building a Fast Event-Driven Simulator for Concurrent Systems of Hardware Processes Using Curio and Python 3.6</a>
    </h1>
  </div>
  <div class="article_text">
    <p>This is the third in my series on using <a class="reference external" href="http://curio.readthedocs.io/en/latest/">Curio</a> to build an event-driven
simulator for hardware processes.  The first two parts can be found here:
<a class="reference external" href="https://virantha.com/2017/09/22/hardware-simulation-using-curio/">Part 1</a>, <a class="reference external" href="https://virantha.com/2017/09/27/hardware-simulation-using-curio-2/">Part 2</a>.  We're going to use the simulator framework to implement
a <em>distributed</em> and <em>concurrent</em> hardware palindrome checker in less than 50 …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>27 <span>Sep</span></p>
        </div>
        <a href="https://virantha.com/2017/09/27/hardware-simulation-using-curio-2/">Part 2 - Building a Fast Event-Driven Simulator for Concurrent Systems of Hardware Processes Using Curio and Python 3.6</a>
    </h1>
  </div>
  <div class="article_text">
    <p>This is the second in my series on using <a class="reference external" href="http://curio.readthedocs.io/en/latest/">Curio</a> to build an event-driven simulator for
hardware processes. (see <a class="reference external" href="https://virantha.com/2017/09/22/hardware-simulation-using-curio/">Part 1</a> for the first article)</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title"><a class="reference internal" href="#top">Table of Contents:</a></p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#enhancing-the-simulator-framework" id="toc-entry-1">1&nbsp;&nbsp;&nbsp;Enhancing the Simulator Framework</a></li>
<li><a class="reference internal" href="#introducing-ports" id="toc-entry-2">2&nbsp;&nbsp;&nbsp;Introducing Ports</a></li>
<li><a class="reference internal" href="#simplifying-the-execution" id="toc-entry-3">3&nbsp;&nbsp;&nbsp;Simplifying the execution</a></li>
<li><a class="reference internal" href="#type-annotations-for-readability" id="toc-entry-4">4&nbsp;&nbsp;&nbsp;Type-annotations for readability</a></li>
<li><a class="reference internal" href="#adding-simulation-timestamps-to-the-framework" id="toc-entry-5">5&nbsp;&nbsp;&nbsp;Adding simulation timestamps to the …</a></li></ul></div>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>22 <span>Sep</span></p>
        </div>
        <a href="https://virantha.com/2017/09/22/hardware-simulation-using-curio/">Part 1 - Building a Fast Event-Driven Simulator for Concurrent Systems of Hardware Processes Using Curio and Python 3.6</a>
    </h1>
  </div>
  <div class="article_text">
    <p>In this post, the first in a series of three, I'm going to show you how to
build an elegant simulator of a concurrent system using the amazing <a class="reference external" href="http://curio.readthedocs.io/en/latest/">Curio</a>
library from David Beazley that's built on Python 3.6's async coroutine
features.  I hope it'll provide a nice intro to …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>28 <span>Nov</span></p>
        </div>
        <a href="https://virantha.com/2016/11/28/moneydance-python-extension-tips/">How to use Python to generate extensions with a GUI for Moneydance 2017</a>
    </h1>
  </div>
  <div class="article_text">
    <p>This post describes some of my experiences writing a python extension for Moneydance, a cross-platform
personal finance manager (an alternative to Intuit Quicken).  I was originally attracted to this product
because it runs on a Mac (albeit using a Java look and feel), uses Direct Connect to download transactions from …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>23 <span>Jun</span></p>
        </div>
        <a href="https://virantha.com/2016/06/23/elegant-command-line-parsing-in-python/">Elegant command line parsing in Python using docopt, schema, and yaml</a>
    </h1>
  </div>
  <div class="article_text">
    <p>Both for my work and personal use, I tend to develop many command-line Python
scripts that are very data-driven and configurable.  In Python, it's pretty
trivial to use argparse to support complex argument and option structures, and
then use the integration with configparser to allow one to write files that …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>07 <span>Apr</span></p>
        </div>
        <a href="https://virantha.com/2016/04/07/updated-reverse-engineering-nissan-connect-ev-protocol/">[UPDATED] Reverse engineering the remote control protocol for the Nissan LEAF (the new Nissan EV protocol)</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is an update to my <a class="reference external" href="https://virantha.com/2016/01/12/reverse-engineering-nissan-connect-ev-protocol/">earlier post on the Nissan Leaf remote telematics</a>.  Nissan
had taken their API offline in February 2016 to address <a class="reference external" href="http://www.troyhunt.com/2016/02/controlling-vehicle-features-of-nissan.html?m=1">the security
vulnerabilities</a>,
and this post details how to connect to the new API that went into place in
early April.</p>
</div>
<div class="section" id="nissan-connect-ev">
<h2>1&nbsp;&nbsp;&nbsp;Nissan Connect …</h2></div>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>10 <span>Mar</span></p>
        </div>
        <a href="https://virantha.com/2016/03/10/example-provisioning-of-hackt-using-vagrant-ansible/">An Example Provisioning of HACKT on a Centos 7 VM using Vagrant and Ansible</a>
    </h1>
  </div>
  <div class="article_text">
    <p>I recently needed to get an open-source circuit toolkit (<a class="reference external" href="https://github.com/fangism/hackt/">HACKT</a>)compiled and deployed on my local system. I already knew
the C++ source compiled and installed fine on Linux, and didn't want to jump through the hoops to get it running
on my Mac 10.11 (El Capitan) system, so …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>12 <span>Jan</span></p>
        </div>
        <a href="https://virantha.com/2016/01/12/reverse-engineering-nissan-connect-ev-protocol/">Reverse engineering the remote control protocol for the Nissan LEAF (the new Nissan EV protocol)</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="section" id="nissan-connect-ev">
<h2>1&nbsp;&nbsp;&nbsp;Nissan Connect EV</h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>Update April 2016</em>:  Nissan has updated their API calls to actually use the user login information to authenticate instead of just the VIN.
You can see a summary of the newer API in my new post <a class="reference external" href="https://virantha.com/2016/04/07/updated-reverse-engineering-nissan-connect-ev-protocol/">here</a>.</p>
</div>
<p>For those of you with a Nissan LEAF …</p></div>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>09 <span>Mar</span></p>
        </div>
        <a href="https://virantha.com/2015/03/09/migrating-xenserver-vdi-to-kvm/">Migrating XenServer Virtual Machine VDIs to KVM</a>
    </h1>
  </div>
  <div class="article_text">
    <p>After having worked with Xenserver 6.2 for over a year now, I've decided to
migrate away from it.  It just wasn't stable enough with SATA
pass-through on my machine, and it had some really annoying bugs with the way
snapshots and backups were handled:</p>
<ul class="simple">
<li>Under load, my SATA 8-bay …</li></ul>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>26 <span>Jan</span></p>
        </div>
        <a href="https://virantha.com/2015/01/26/building-a-low-power-file-server-intel-avoton/">Building a low-power home file server using Intel's Avoton platform</a>
    </h1>
  </div>
  <div class="article_text">
    <p>In this post I'll detail the hardware I used to upgrade my 2 year old home
server that was getting a little bit long in the tooth.  I wanted to replace a
Core i7 based XenServer host connected to an external 8-bay SATA enclosure that
had an idle power consumption …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>22 <span>Aug</span></p>
        </div>
        <a href="https://virantha.com/2014/08/22/setting-up-edgemax-edgerouter-lite-erlite-3/">Setting up the Edgemax EdgeRouter Lite (ERLite-3) in a Home Environment</a>
    </h1>
  </div>
  <div class="article_text">
    <p>This is just my cheat sheet on setting up the <a class="amazon" href="http://www.amazon.com/gp/product/B00CPRVF5K?ie=UTF8&linkCode=as2&camp=1634&tag=virantha-20">EdgeRouter ERLite-3</a>
in a home environment.  I recently migrated to this after a long
search for a low-power firewall and router solution.  Prior to getting this
beauty, I'd migrated my stand-alone PC running Ipcop/Smoothwall to a Xen
virtual machine …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>07 <span>May</span></p>
        </div>
        <a href="https://virantha.com/2014/05/07/ember-js-oauth2-implicit-grant-example/">Example of how to authenticate using Oauth2 in Ember.js using Implicit Grant (client-side)</a>
    </h1>
  </div>
  <div class="article_text">
    <p>This post will show a quick and complete example on how to authenticate someone
using their Google credentials in your <a class="reference external" href="http://emberjs.com">Ember.js</a>  web
application.  This uses the implicit-grant scheme in Oauth2, so everything
happens on the client side, without exposing the user's Google credentials or
requiring a back-end server.  Obviously …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>30 <span>Mar</span></p>
        </div>
        <a href="https://virantha.com/2014/03/30/images-color-and-blank-detection/">Detecting color vs greyscale and blank pages during scanning</a>
    </h1>
  </div>
  <div class="article_text">
    <p>Recently, I <a class="reference external" href="http://virantha.com/category/scanpdf.html">needed</a> a way to detect if a color scanned image was actually color or just contained greyscale/BW
content.  I also wanted to detect if an image was &quot;blank&quot;, or just a continuous shade of one color.  I couldn't
really find a simple solution on the web, so …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>17 <span>Mar</span></p>
        </div>
        <a href="https://virantha.com/2014/03/17/one-touch-scanning-with-fujitsu-scansnap-in-linux/">One-touch scan enabling in Ubuntu Linux for the Fujitsu ScanSnap S1500</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="contents topic" id="table-of-contents">
<p class="topic-title"><a class="reference internal" href="#top">Table of Contents:</a></p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#building-scanbd" id="toc-entry-1">1&nbsp;&nbsp;&nbsp;Building Scanbd</a></li>
<li><a class="reference internal" href="#configuring-scanbd" id="toc-entry-2">2&nbsp;&nbsp;&nbsp;Configuring Scanbd</a></li>
<li><a class="reference internal" href="#custom-scan-script" id="toc-entry-3">3&nbsp;&nbsp;&nbsp;Custom scan script</a></li>
<li><a class="reference internal" href="#starting-scanbd-as-a-service" id="toc-entry-4">4&nbsp;&nbsp;&nbsp;Starting Scanbd as a service</a></li>
</ul>
</div>
<p>Here's how I managed to get Linux to recognise scan button presses on the
S1500, and automatically initiate a scan to a pdf file.  You first
need to download <a class="reference external" href="http://sourceforge.net/projects/scanbd/">Scanbd</a> and …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>14 <span>Nov</span></p>
        </div>
        <a href="https://virantha.com/2013/11/14/starting-a-simple-flask-app-with-heroku/">Starting a simple Flask app with Heroku</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="figure align-right">
<img alt="Flask and Heroku" src="/images/2013/python_flask_cloud_scaled.jpg"/>
<script>
                $(document).ready( function () { 
                    $('#unknown_0').DataTable( { layout:
                     {
                        topStart: null,
                        topEnd: null,
                        bottom: null,
                        bottomStart: 'info',
                        bottomEnd: 'paging'
                        }
                    }); 
                    } );</script></div>
<p>Inspired by <a class="reference external" href="http://shea.io/lightweight-python-apps-with-flask-twitter-bootstrap-and-heroku/">this article</a> on Python Weekly, I thought I'd look into
deploying a simple hello world application to Heroku, built on the Flask
micro framework.</p>
<p>Here's my workflow:</p>
<ul>
<li><p class="first">Create a new directory and …</p></li></ul>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>04 <span>Nov</span></p>
        </div>
        <a href="https://virantha.com/2013/11/04/creating-new-notes-and-attaching-files-using-evernotes-python-api/">Creating new notes and attaching files using Evernote's Python API</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="figure align-right">
<img alt="Documents to Evernote" src="/images/2013/cloud.jpg" />
</div>
<p>I managed to piece together how to attach a new PDF file to an Evernote
note using their Python API, so I thought it might be useful to have a
post that has all of this information together in one place. &nbsp;I've put
together a complete example that will:</p>
<ol class="arabic simple">
<li>Authenticate …</li></ol>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>29 <span>Sep</span></p>
        </div>
        <a href="https://virantha.com/2013/09/29/quick-web-app-with-go-ember-js-and-mongodb/">Quick web app with Go, Ember.js, and MongoDB</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="figure align-left" style="width: 236px">
<img alt="skip_better Screenshot" src="/images/2013/kittens_app_screenshot_scaled.png" style="width: 236px;"/>
<script>
                $(document).ready( function () { 
                    $('#unknown_0').DataTable( { layout:
                     {
                        topStart: null,
                        topEnd: null,
                        bottom: null,
                        bottomStart: 'info',
                        bottomEnd: 'paging'
                        }
                    }); 
                    } );</script><script>
                $(document).ready( function () { 
                    $('#unknown_1').DataTable( { layout:
                     {
                        topStart: null,
                        topEnd: null,
                        bottom: null,
                        bottomStart: 'info',
                        bottomEnd: 'paging'
                        }
                    }); 
                    } );</script><script>
                $(document).ready( function () { 
                    $('#unknown_2').DataTable( { layout:
                     {
                        topStart: null,
                        topEnd: null,
                        bottom: null,
                        bottomStart: 'info',
                        bottomEnd: 'paging'
                        }
                    }); 
                    } );</script><script>
                $(document).ready …</script></div>
  </div>
</article>


<footer style="clear:both;">
<div id="paginator">
<span id="left">
</span>

    <a href="https://virantha.com/category/tech.html">[1]</a>
    <a href="https://virantha.com/category/tech2.html"> 2 </a>

<span id="right">
<a href="https://virantha.com/category/tech2.html">Next <i class="fa fa-arrow-circle-right"></i></a>
</span>
</div>
</footer>

    <div id="ending_message">
        <p>&copy; Virantha Ekanayake. Built using <a href="https://getpelican.com" target="_blank">Pelican</a>. Modified <a href='https://github.com/virantha/pelican-svbhack'>svbhack</a> theme, based on <a href="https://github.com/pR0Ps/pelican-svbhack" target="_blank">theme</a> by Carey Metcalfe</p>
    </div>
  </main>


  <script type="text/javascript">
    window.onload = function(){
      var e = document.querySelectorAll(".email");
      for (var i = 0; i < e.length; i++) {
        e[i].href = e[i].getAttribute("data-email").split("").reverse().join("");
        e[i].removeAttribute("data-email");
        e[i].removeAttribute("title");
        e[i].removeAttribute("class");
        e[i].setAttribute("class","ext-links");
      }

      $.get("https://ipinfo.io", function (response) {
        //$("#country").html(response.country);
        //response.country = "CA";
        var country_codes = { 
            "GB": { "id" : "virantha-uk-21", "url" : "www.amazon.co.uk"},
            "CA": { "id" : "virantha-ca-20", "url" : "www.amazon.ca"},
            "DE": { "id" : "virantha-de-21", "url" : "www.amazon.de"},
            "FR": { "id" : "viranthacom0c-21", "url" : "www.amazon.fr"},
            "ES": { "id" : "viranthaco0b5-21", "url" : "www.amazon.es"},
            "IT": { "id" : "viranthacom02-21", "url" : "www.amazon.it"}
        } 
        if (response.country in country_codes) {
                
            var e = document.querySelectorAll(".amazon");
            for (var i = 0; i < e.length; i++) {
                e[i].href = e[i].href.replace("www.amazon.com", country_codes[response.country]["url"]);
                e[i].href = e[i].href.replace("virantha-20", country_codes[response.country]["id"]);
                e[i].setAttribute("class","amazn");
             }
        }
        }, "jsonp"); 
    };
  </script>


<script src="https://files.stork-search.net/releases/v1.5.0/stork.js"></script>
<script>
    stork.register("sitesearch", "https://virantha.com/search-index.st");
</script>
</body>
</html>