<!DOCTYPE html>
<html lang="en">

<head>
      <link rel="stylesheet" type="text/css" href="https://virantha.github.io/theme/css/style.css">

  <link rel="stylesheet" type="text/css" href="https://virantha.github.io/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans|PT+Serif|Ubuntu+Mono">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
  <!---
  <link rel="stylesheet" type="text/css" href="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css">
  <link rel="stylesheet" href="/theme/tipuesearch/tipuesearch.css">
  -->
  
  <link rel="stylesheet" href="https://cdn.datatables.net/2.1.8/css/dataTables.dataTables.css" />
    
  <script src="https://code.jquery.com/jquery-3.7.1.min.js""></script>
  <script src="https://cdn.datatables.net/2.1.8/js/dataTables.js"></script>

  <link rel="stylesheet" href="https://files.stork-search.net/releases/v1.6.0/basic.css" />


  <meta charset="utf-8" />
  <meta name="viewport" id="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Virantha Ekanayake">
  <meta name="description" content="Technical writings by Virantha Ekanayake">

  <link rel="author" href="https://plus.google.com/+ViranthaEkanayake/?rel=author">


  <meta name="keywords" content="edgeos, dhcp, dns, thunderbolt, macbook, usb-c, buying guide, docking station, hub, toys, lego, bluetooth, bricknil, tech, python, curio, async, bluetoothle, raspberry, pi, ansible, automation, await, jython, moneydance, photokeeper, flashair, flickr, frame, photo, qif, financial, scraping, pokemon, docopt, schema, yaml, LEAF, Nissan, virtualization, vagrant, resume, docx, linux, hardware, router, vim, oauth, ember, javascript, diy, imagemagick, scan, pdf, scansnap, snippet, web, appliance, airframe, flask, heroku, evernote, go, mongodb, word, ocr, tesseract, shopping, decorators, paperless, tips, ebooks">

  <title>
Author: virantha | Virantha Namal Ekanayake  </title>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45383503-1', 'virantha.com');
  ga('send', 'pageview');
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="https://virantha.github.io">
        <img src="http://localhost:8000/images/static/veezer_mini.jpg" alt="logo" id="logo">
      </a>
      <h2><a href="https://virantha.github.io" class="nohover">Virantha Ekanayake</a></h2>
      <p>Technology * Python * FPGAs * Semiconductors * Startups</p>
      <div class="stork-wrapper">
       <input data-stork="sitesearch" class="stork-input"/>
        <div data-stork="sitesearch-output" class="stork-output"></div>
    </div>
      
      <div>
          <ul>


            <li><a data-email="moc.liamg@ahtnariv:otliam" title="You need javascript enabled to view this email" href="#" class="ext-links email" target="_blank">Email<i class="fa fa-envelope"></i></a></li>



            
            <li><a href="https://twitter.com/virantha" target="_blank"><span class="ext-links">Twitter</span><i class="fa fa-twitter "></i></a></li>



            
            <li><a href="https://www.linkedin.com/pub/virantha-ekanayake/1a/a4b/56" target="_blank"><span class="ext-links">Linkedin</span><i class="fa fa-external-link-square "></i></a></li>



            
            <li><a href="https://github.com/virantha" target="_blank"><span class="ext-links">GitHub</span><i class="fa fa-github "></i></a></li>
            <br>
        </div>

        
      </ul>
    </div>
  </aside>

  <main id="main">
    <header>
      <p id="header">
      
      </p>
<div class='nav-class'>

    <ul>
        <li>
            <a id='head' href="https://virantha.github.io">Home</a> &#124; 
            <ul>
                <li><a href='https://virantha.github.io/blog.html'>All posts</a></li>
                <li><a href='https://virantha.github.io/tags.html'>Tags</a></li>
            </ul>
        </li>
                <li><a href=#'>Projects</a>
                <ul>                        <li><a href="https://virantha.github.io/category/pypdfocr.html"> PyPDFOCR </a> </li>
                        <li><a href="https://virantha.github.io/category/airframe.html"> AirFrame </a> </li>
                        <li><a href="https://virantha.github.io/category/scanpdf.html"> ScanPDF </a> </li>
                        <li><a href="https://virantha.github.io/category/oneresume.html"> OneResumé </a> </li>
                        <li><a href="https://virantha.github.io/category/fundsgather.html"> FundsGather </a> </li>
                        <li><a href="https://virantha.github.io/category/photokeeper.html"> PhotoKeeper </a> </li>
                        <li><a href="https://virantha.github.io/category/bricknil.html"> BrickNil </a> </li>
                </ul>
                </li>
                <li><a href="https://virantha.github.io/category/tech.html"> Tech notes </a> </li>
                <li><a href="https://virantha.github.io/category/snippets.html"> Snippets </a> </li>
                <li><a href="https://virantha.github.io/category/diy.html"> DIY </a> </li>
                <li><a href="https://virantha.github.io/category/shopping.html"> Shopping </a> </li>
                    <!--
                    <div class="stork-wrapper-edible">
                        <input data-stork="federalist-edible" class="stork-input" />
                        <div data-stork="federalist-edible-output" class="stork-output"></div>
                    </div>
                    -->
                    
    </ul>
</div>
<p>Author: virantha</p>
    </header>

<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>21 <span>May</span></p>
        </div>
        <a href="https://virantha.github.io/2014/05/21/ubuntu-14-04-trusty-on-xenserver-62/">Installing Ubuntu 14.04 LTS (Trusty Tahir) VM on a XenServer 6.2 host</a>
    </h1>
  </div>
  <div class="article_text">
    <p>I had a hard time getting Xenserver 6.2 to install a new VM with the latest
long-term-support version of Ubuntu (14.04).  The process documented below, pieced together from
several posts, leads to a fairly straight-forward install.</p>
<div class="section" id="fix-your-pygrub-on-the-xenserver-host">
<h2>Fix your pygrub on the Xenserver host</h2>
<p>Based on <a class="reference external" href="http://ubuntuforums.org/showthread.php?t=2216358&amp;page=2&amp;p=13006428#post13006428">this post</a>, do …</p></div>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>12 <span>May</span></p>
        </div>
        <a href="https://virantha.github.io/2014/05/12/existing-tab-stop-manipulation-in-vim/">Changing tab stops in Vim</a>
    </h1>
  </div>
  <div class="article_text">
    <p>I normally use spaces in my files instead of tabs for indentation, with 4 being my default indent width.  Sometimes, I need
to change this on existing files to 2, so for the most part, the following sequence works.  First,</p>
<pre class="literal-block">
set ts=4 sts=4 noet
retab!
</pre>
<p>This changes every …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>08 <span>May</span></p>
        </div>
        <a href="https://virantha.github.io/2014/05/08/setting-up-new-project-using-google-oauth2-api/">Setting up Google Oauth2 API</a>
    </h1>
  </div>
  <div class="article_text">
    <p class="first last">This documents the steps necessary to enable Google Oauth in your web application for authentication.</p>

  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>07 <span>May</span></p>
        </div>
        <a href="https://virantha.github.io/2014/05/07/ember-js-oauth2-implicit-grant-example/">Example of how to authenticate using Oauth2 in Ember.js using Implicit Grant (client-side)</a>
    </h1>
  </div>
  <div class="article_text">
    <p>This post will show a quick and complete example on how to authenticate someone
using their Google credentials in your <a class="reference external" href="http://emberjs.com">Ember.js</a>  web
application.  This uses the implicit-grant scheme in Oauth2, so everything
happens on the client side, without exposing the user's Google credentials or
requiring a back-end server.  Obviously …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>15 <span>Apr</span></p>
        </div>
        <a href="https://virantha.github.io/2014/04/15/replacing-noisy-fan-broan-bathroom-688/">Replacing a Noisy Broan Bathroom Fan (Builder's grade 688)</a>
    </h1>
  </div>
  <div class="article_text">
    <p>Here are my quick notes on replacing noisy contractor grade fans
in bathrooms.  The <a class="amazon" href="http://www.amazon.com/gp/product/B00004TTZZ?ie=UTF8&amp;linkCode=as2&amp;camp=1634&amp;tag=virantha-20">Broan 688</a> and variants
are common installations in new and rehabbed homes because they're
relatively cheap.  But boy, at 4 sones sound output, they're very loud
and irritating to leave running for a long time.</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title"><a class="reference internal" href="#top">Table …</a></p></div>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>30 <span>Mar</span></p>
        </div>
        <a href="https://virantha.github.io/2014/03/30/images-color-and-blank-detection/">Detecting color vs greyscale and blank pages during scanning</a>
    </h1>
  </div>
  <div class="article_text">
    <p>Recently, I <a class="reference external" href="http://virantha.com/category/scanpdf.html">needed</a> a way to detect if a color scanned image was actually color or just contained greyscale/BW
content.  I also wanted to detect if an image was "blank", or just a continuous shade of one color.  I couldn't
really find a simple solution on the web, so …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>30 <span>Mar</span></p>
        </div>
        <a href="https://virantha.github.io/2014/03/30/scanpdf-usage-guide/">ScanPDF - Usage guide</a>
    </h1>
  </div>
  <div class="article_text">
    <p>If you're looking for a simple way to use a multi-page scanner and get your
document into a PDF in Linux without any proprietary or commercial software,
then ScanPDF might be the solution.  I wrote it to quickly take the Linux SANE
scanner system output image files, and process them …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>24 <span>Mar</span></p>
        </div>
        <a href="https://virantha.github.io/2014/03/24/clang-mavericks-error-workaround/">Getting around Xcode 5.1 clang -mno-fused-madd error</a>
    </h1>
  </div>
  <div class="article_text">
    <p>Recently updated to Xcode 5.1 on my Mavericks install, and when I went to update a few Python PyPI packages
like reportlab and fabric, I started hitting this error on the compile step:</p>
<pre class="literal-block">
clang: error: unknown argument: '-mno-fused-madd' [-Wunused-command-line-argument-hard-error-in-future]
</pre>
<p>After a little bit of googling, it seems like the …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>17 <span>Mar</span></p>
        </div>
        <a href="https://virantha.github.io/2014/03/17/one-touch-scanning-with-fujitsu-scansnap-in-linux/">One-touch scan enabling in Ubuntu Linux for the Fujitsu ScanSnap S1500</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="contents topic" id="table-of-contents">
<p class="topic-title"><a class="reference internal" href="#top">Table of Contents:</a></p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#building-scanbd" id="toc-entry-1">1   Building Scanbd</a></li>
<li><a class="reference internal" href="#configuring-scanbd" id="toc-entry-2">2   Configuring Scanbd</a></li>
<li><a class="reference internal" href="#custom-scan-script" id="toc-entry-3">3   Custom scan script</a></li>
<li><a class="reference internal" href="#starting-scanbd-as-a-service" id="toc-entry-4">4   Starting Scanbd as a service</a></li>
</ul>
</div>
<p>Here's how I managed to get Linux to recognise scan button presses on the
S1500, and automatically initiate a scan to a pdf file.  You first
need to download <a class="reference external" href="http://sourceforge.net/projects/scanbd/">Scanbd</a> and …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>11 <span>Mar</span></p>
        </div>
        <a href="https://virantha.github.io/2014/03/11/font-rendering-fix-chrome/">Font rendering fix in Chrome</a>
    </h1>
  </div>
  <div class="article_text">
    <p>Seems like there was a reason Chrome rendered the text on this web page rather poorly at first go:
See <a class="reference external" href="http://tanookisuitlabs.com/your-fonts-look-bad-in-chrome-heres-the-fix/">this</a> page, but basically you need to set the anti-aliasing for Chrome:</p>
<div class="highlight"><pre><span></span><span class="nt">-webkit-font-smoothing</span><span class="o">:</span><span class="w"> </span><span class="nt">antialiased</span><span class="o">;</span>
</pre></div>

  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>08 <span>Mar</span></p>
        </div>
        <a href="https://virantha.github.io/2014/03/08/pound-reverse-proxy-easy-to-use-hostnames/">Pound reverse proxy and simpler URLs for webapps (Sickbeard, Plex, CouchPotato, Headphones, SABNZBD)</a>
    </h1>
  </div>
  <div class="article_text">
    <p>I run a plethora of local web applications that each listen on different ports, and
I wanted to simplify their URLs so I could just type a hostname to access them:</p>
<table border="1" class="docutils pretty compact stripe cell-border" id="hostnames">
<caption>Hostname mapping</caption>

<thead valign="bottom">
<tr><th class="head">Application</th>
<th class="head">Default URL</th>
<th class="head">Desired URL</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Sickbeard</td>
<td><a class="reference external" href="http://linux-server:8081">http://linux-server:8081</a></td>
<td><a class="reference external" href="http://sickbeard">http://sickbeard</a></td>
</tr>
<tr><td>SabNZBD</td>
<td><a class="reference external" href="http://linux-server:8080">http://linux-server:8080</a></td>
<td><a class="reference external" href="http://sabnzbd">http://sabnzbd …</a></td></tr></tbody></table>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>02 <span>Mar</span></p>
        </div>
        <a href="https://virantha.github.io/2014/03/02/fix-your-breville-smart-oven-by-replacing-the-thermal-fuse/">Fix your Breville Smart Oven by replacing the thermal fuse</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="figure align-right" style="width: 256px; height: auto; max-width: 100%;">
<img alt="Breville Smart Oven BOV 450XL" src="/images/2014/breville/breville.jpg" style="width: 256px; height: auto; max-width: 100%;"/>
</div>
<p>In this post, I'll dicuss how I was able to quickly and inexpensively replace
the thermal fuse on our Breville digital toaster oven.  There were a few
scattered forum posts from which I pieced together this information, even
though this appears to be a common issue, and applies to the …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>02 <span>Feb</span></p>
        </div>
        <a href="https://virantha.github.io/2014/02/02/digital-toaster-oven-survey/">Digital Toaster Oven Options</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="figure align-right" style="width: 256px; height: auto; max-width: 100%;">
<img alt="Breville Smart Oven BOV 450XL" src="/images/2014/breville/breville.jpg" style="width: 256px; height: auto; max-width: 100%;"/>
</div>
<p>One of the best kitchen upgrades we did was replacing our old twist-a-dial
toaster oven with one that integrates a digital control panel.  This gives us
precise toasting time control (just dial in the exact number of minutes and seconds you
want) and avoids ending up with burnt toast because …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>10 <span>Jan</span></p>
        </div>
        <a href="https://virantha.github.io/2014/01/10/airframe-usage-guide/">AirFrame: Usage guide</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="contents topic" id="table-of-contents">
<p class="topic-title"><a class="reference internal" href="#top">Table of Contents:</a></p>
<ul class="simple">
<li><a class="reference internal" href="#features" id="toc-entry-1">Features</a></li>
<li><a class="reference internal" href="#installation" id="toc-entry-2">Installation</a></li>
<li><a class="reference internal" href="#usage" id="toc-entry-3">Usage</a></li>
</ul>
</div>
<p>Download images from an authenticated Flickr account (or local filesystem) and
push them wirelessly to a Toshiba FlashAir Wifi SD card mounted in a digital
photo frame.</p>
<ul class="simple">
<li>Free software: ASL2 license</li>
<li>Documentation: <a class="reference external" href="http://virantha.github.io/airframe/html">http://virantha.github.io/airframe/html</a></li>
<li>Source: <a class="reference external" href="http://github.com/virantha/airframe">http://github.com/virantha/airframe …</a></li></ul>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>09 <span>Jan</span></p>
        </div>
        <a href="https://virantha.github.io/2014/01/09/hacking-together-a-wifi-photo-frame-with-a-toshiba-flashair-sd-card-wireless-photo-uploads/">AirFrame: Hacking together a WiFi photo frame with a Toshiba FlashAir SD card and Flickr</a>
    </h1>
  </div>
  <div class="article_text">
    <p>I'm going to describe AirFrame, a Python script I wrote that's available
on <a class="reference external" href="http://github.com/virantha/airframe">GitHub</a> under ASL2 open-source, that can automatically pull photos
matching a given set of tags from an authorized Flickr account, and
wirelessly push them to a WiFi enabled SD card sitting inside an
inexpensive digital photo frame …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>14 <span>Nov</span></p>
        </div>
        <a href="https://virantha.github.io/2013/11/14/starting-a-simple-flask-app-with-heroku/">Starting a simple Flask app with Heroku</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="figure align-right" style="width: 383px; height: auto; max-width: 100%;">
<img alt="Flask and Heroku" src="/images/2013/python_flask_cloud_scaled.jpg" style="width: 383px; height: auto; max-width: 100%;"/>
<script>
                $(document).ready( function () { 
                    $('#unknown_0').DataTable( { layout:
                     {
                        topStart: null,
                        topEnd: null,
                        bottom: null,
                        bottomStart: 'info',
                        bottomEnd: 'paging'
                        }
                    }); 
                    } );</script></div>
<p>Inspired by <a class="reference external" href="http://shea.io/lightweight-python-apps-with-flask-twitter-bootstrap-and-heroku/">this article</a> on Python Weekly, I thought I'd look into
deploying a simple hello world application to Heroku, built on the Flask
micro framework.</p>
<p>Here's my workflow:</p>
<ul>
<li><p class="first">Create a new directory and …</p></li></ul>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>04 <span>Nov</span></p>
        </div>
        <a href="https://virantha.github.io/2013/11/04/creating-new-notes-and-attaching-files-using-evernotes-python-api/">Creating new notes and attaching files using Evernote's Python API</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="figure align-right" style="width: 282px; height: auto; max-width: 100%;">
<img alt="Documents to Evernote" src="/images/2013/cloud.jpg" style="width: 282px; height: auto; max-width: 100%;"/>
</div>
<p>I managed to piece together how to attach a new PDF file to an Evernote
note using their Python API, so I thought it might be useful to have a
post that has all of this information together in one place.  I've put
together a complete example that will:</p>
<ol class="arabic simple">
<li>Authenticate …</li></ol>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>29 <span>Sep</span></p>
        </div>
        <a href="https://virantha.github.io/2013/09/29/quick-web-app-with-go-ember-js-and-mongodb/">Quick web app with Go, Ember.js, and MongoDB</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="figure align-left" style="width: 236px">
<img alt="skip_better Screenshot" src="/images/2013/kittens_app_screenshot_scaled.png" style="width: 236px;"/>
<script>
                $(document).ready( function () { 
                    $('#unknown_0').DataTable( { layout:
                     {
                        topStart: null,
                        topEnd: null,
                        bottom: null,
                        bottomStart: 'info',
                        bottomEnd: 'paging'
                        }
                    }); 
                    } );</script><script>
                $(document).ready( function () { 
                    $('#unknown_1').DataTable( { layout:
                     {
                        topStart: null,
                        topEnd: null,
                        bottom: null,
                        bottomStart: 'info',
                        bottomEnd: 'paging'
                        }
                    }); 
                    } );</script><script>
                $(document).ready( function () { 
                    $('#unknown_2').DataTable( { layout:
                     {
                        topStart: null,
                        topEnd: null,
                        bottom: null,
                        bottomStart: 'info',
                        bottomEnd: 'paging'
                        }
                    }); 
                    } );</script><script>
                $(document).ready …</script></div>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>04 <span>Sep</span></p>
        </div>
        <a href="https://virantha.github.io/2013/09/04/pyyaml-include-yaml-files-within-yaml-files/">PyYAML: Include yaml files within yaml files</a>
    </h1>
  </div>
  <div class="article_text">
    <p>The official YAML spec doesn't support embedding external files inside a
YAML file, a feature that can be extremely useful for maintenance of
long/complex YAML files. I found this great code snippet
<a class="reference external" href="http://code.activestate.com/recipes/577613-yaml-include-support/">yaml-include-snippet</a> for including other YAML files in your top-level
YAML.</p>
<p>However, the code above assumes the include …</p>
  </div>
</article>
<hr />
<article>
    <h1>
    <div class="article_title">
        <div class="date">
            <p>16 <span>Aug</span></p>
        </div>
        <a href="https://virantha.github.io/2013/08/16/reading-and-writing-microsoft-word-docx-files-with-python/">Reading and writing Microsoft Word docx files with Python</a>
    </h1>
  </div>
  <div class="article_text">
    <div class="figure align-right">
<img alt="skip_better python" src="/images/2013/python_scaled.png" style="width: 250px;"/>
</div>
<p>I've been wanting to script simple text scanning and substitution in
Microsoft Word documents for a while now, and after a little digging, it
turns out, it's fairly straight-forward to read and edit .docx (OpenXML)
or the <a class="reference external" href="http://www.ecma-international.org/publications/standards/Ecma-376.htm">ECMA-376</a> original standard, and now under ISO as <a class="reference external" href="http://www.iso.org/iso/catalogue_detail?csnumber=51463">ISO/IEC
29500</a>. Although I …</p>
  </div>
</article>


<footer style="clear:both;">
<div id="paginator">
<span id="left">
<a href="https://virantha.github.io/author/virantha.html"><i class="fa fa-arrow-circle-left"></i> Prev</a>
</span>

    <a href="https://virantha.github.io/author/virantha.html"> 1 </a>
    <a href="https://virantha.github.io/author/virantha2.html">[2]</a>
    <a href="https://virantha.github.io/author/virantha3.html"> 3 </a>

<span id="right">
<a href="https://virantha.github.io/author/virantha3.html">Next <i class="fa fa-arrow-circle-right"></i></a>
</span>
</div>
</footer>

    <div id="ending_message">
        <p>&copy; Virantha Ekanayake. Built using <a href="https://getpelican.com" target="_blank">Pelican</a>. Modified <a href='https://github.com/virantha/pelican-svbhack'>svbhack</a> theme, based on <a href="https://github.com/pR0Ps/pelican-svbhack" target="_blank">theme</a> by Carey Metcalfe</p>
    </div>
  </main>


  <script type="text/javascript">
    window.onload = function(){
      var e = document.querySelectorAll(".email");
      for (var i = 0; i < e.length; i++) {
        e[i].href = e[i].getAttribute("data-email").split("").reverse().join("");
        e[i].removeAttribute("data-email");
        e[i].removeAttribute("title");
        e[i].removeAttribute("class");
        e[i].setAttribute("class","ext-links");
      }

      $.get("https://ipinfo.io", function (response) {
        //$("#country").html(response.country);
        //response.country = "CA";
        var country_codes = { 
            "GB": { "id" : "virantha-uk-21", "url" : "www.amazon.co.uk"},
            "CA": { "id" : "virantha-ca-20", "url" : "www.amazon.ca"},
            "DE": { "id" : "virantha-de-21", "url" : "www.amazon.de"},
            "FR": { "id" : "viranthacom0c-21", "url" : "www.amazon.fr"},
            "ES": { "id" : "viranthaco0b5-21", "url" : "www.amazon.es"},
            "IT": { "id" : "viranthacom02-21", "url" : "www.amazon.it"}
        } 
        if (response.country in country_codes) {
                
            var e = document.querySelectorAll(".amazon");
            for (var i = 0; i < e.length; i++) {
                e[i].href = e[i].href.replace("www.amazon.com", country_codes[response.country]["url"]);
                e[i].href = e[i].href.replace("virantha-20", country_codes[response.country]["id"]);
                e[i].setAttribute("class","amazn");
             }
        }
        }, "jsonp"); 
    };
  </script>


<script src="https://files.stork-search.net/releases/v1.5.0/stork.js"></script>
<script>
    stork.register("sitesearch", "https://virantha.github.io/search-index.st");
</script>
</body>
</html>