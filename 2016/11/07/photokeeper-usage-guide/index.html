<!DOCTYPE html>
<html lang="en">

<head>
      <link rel="stylesheet" type="text/css" href="https://virantha.com/theme/css/style.css">

  <link rel="stylesheet" type="text/css" href="https://virantha.com/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans|PT+Serif|Ubuntu+Mono">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
  <!---
  <link rel="stylesheet" type="text/css" href="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css">
  <link rel="stylesheet" href="/theme/tipuesearch/tipuesearch.css">
  -->
  
  <link rel="stylesheet" href="https://cdn.datatables.net/2.1.8/css/dataTables.dataTables.css" />
    
  <script src="https://code.jquery.com/jquery-3.7.1.min.js""></script>
  <script src="https://cdn.datatables.net/2.1.8/js/dataTables.js"></script>

  <link rel="stylesheet" href="https://files.stork-search.net/releases/v1.6.0/edible.css" />


  <meta charset="utf-8" />
  <meta name="viewport" id="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Virantha Ekanayake">
  <meta name="description" content="Technical writings by Virantha Ekanayake">

  <link rel="author" href="https://plus.google.com/+ViranthaEkanayake/?rel=author">


<meta name="keywords" content="tech, photokeeper, flashair, flickr, frame, photo, python">

  <title>
PhotoKeeper: Usage guide | Virantha Namal Ekanayake  </title>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45383503-1', 'virantha.com');
  ga('send', 'pageview');
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="https://virantha.com">
        <img src="http://localhost:8000/images/static/veezer_mini.jpg" alt="logo" id="logo">
      </a>
      <h2><a href="https://virantha.com" class="nohover">Virantha Ekanayake</a></h2>
      <p>Technology * Python * FPGAs * Semiconductors * Startups
      
      <div>
          <ul>


            <li><a data-email="moc.liamg@ahtnariv:otliam" title="You need javascript enabled to view this email" href="#" class="ext-links email" target="_blank">Email<i class="fa fa-envelope"></i></a></li>



            
            <li><a href="https://twitter.com/virantha" target="_blank"><span class="ext-links">Twitter</span><i class="fa fa-twitter "></i></a></li>



            
            <li><a href="https://www.linkedin.com/pub/virantha-ekanayake/1a/a4b/56" target="_blank"><span class="ext-links">Linkedin</span><i class="fa fa-external-link-square "></i></a></li>



            
            <li><a href="https://github.com/virantha" target="_blank"><span class="ext-links">GitHub</span><i class="fa fa-github "></i></a></li>
            <br>
        </div>
<p>
<!-- AddThis Button BEGIN -->
<div class="sharing addthis_toolbox addthis_default_style addthis_16x16_style">
    <a class="addthis_button_twitter"></a>
    <a class="addthis_button_google_plusone_share"></a>
    <a class="addthis_button_facebook"></a>
    <a class="addthis_button_hackernews"></a>
    <a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style"></a>
</div>
</p>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-533983e96da03f48"></script>
<!-- AddThis Button END -->
        
      </ul>
    </div>
  </aside>

  <main id="main">
    <header>
      <p id="header">
      
      </p>
<div class='nav-class'>

    <ul>
        <li>
            <a id='head' href="https://virantha.com">Home</a> &#124; 
            <ul>
                <li><a href='https://virantha.com/blog.html'>All posts</a></li>
                <li><a href='https://virantha.com/tags.html'>Tags</a></li>
            </ul>
        </li>
                <li><a href=#'>Projects</a>
                <ul>                        <li><a href="https://virantha.com/category/pypdfocr.html"> PyPDFOCR </a> </li>
                        <li><a href="https://virantha.com/category/airframe.html"> AirFrame </a> </li>
                        <li><a href="https://virantha.com/category/scanpdf.html"> ScanPDF </a> </li>
                        <li><a href="https://virantha.com/category/oneresume.html"> OneResumé </a> </li>
                        <li><a href="https://virantha.com/category/fundsgather.html"> FundsGather </a> </li>
                        <li><a href="https://virantha.com/category/photokeeper.html"> PhotoKeeper </a> </li>
                        <li><a href="https://virantha.com/category/bricknil.html"> BrickNil </a> </li>
                </ul>
                </li>
                <li><a href="https://virantha.com/category/tech.html"> Tech notes </a> </li>
                <li><a href="https://virantha.com/category/snippets.html"> Snippets </a> </li>
                <li><a href="https://virantha.com/category/diy.html"> DIY </a> </li>
                <li><a href="https://virantha.com/category/shopping.html"> Shopping </a> </li>
                    <!--
                    <div class="stork-wrapper-edible">
                        <input data-stork="federalist-edible" class="stork-input" />
                        <div data-stork="federalist-edible-output" class="stork-output"></div>
                    </div>
                    -->
                    
    </ul>
</div>
<p>Posted
 by virantha
on Mon 07 November 2016 </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="https://virantha.com/2016/11/07/photokeeper-usage-guide/" class="nohover">PhotoKeeper: Usage guide</a></h1>
  </div>
  <div class="article_text">
    <div class="contents topic" id="table-of-contents">
<p class="topic-title"><a class="reference internal" href="#top">Table of Contents:</a></p>
<ul class="simple">
<li><a class="reference internal" href="#features" id="toc-entry-1">Features</a></li>
<li><a class="reference internal" href="#usage" id="toc-entry-2">Usage:</a><ul>
<li><a class="reference internal" href="#examine-files" id="toc-entry-3">Examine files</a></li>
<li><a class="reference internal" href="#copy-files-to-a-directory" id="toc-entry-4">Copy files to a directory</a></li>
<li><a class="reference internal" href="#upload-files-to-flickr" id="toc-entry-5">Upload files to Flickr</a></li>
<li><a class="reference internal" href="#full-help" id="toc-entry-6">Full help</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation" id="toc-entry-7">Installation</a></li>
<li><a class="reference internal" href="#disclaimer" id="toc-entry-8">Disclaimer</a></li>
</ul>
</div>
<p>This script will take a source directory (say the contents of a flash card from a camera),
scan all the image/video file EXIFs, and sort them into date-based folders in a user-specified
directory.  It will optionally only copy files that have not already been copied (deduplication per
folder).  Photo Keeper can also upload all the files to Flickr into the same date-based album
structure, also taking care not to duplicate files.</p>
<p>At some point, I intend to integrate this with the FlashAir series of cards for auto-uploads directly
from the camera, but that is still a work in progress.</p>
<ul class="simple">
<li>Free and open-source software: ASL2 license</li>
<li>Blog: <a class="reference external" href="http://virantha.com/category/projects/photokeeper">http://virantha.com/category/projects/photokeeper</a></li>
<li>Documentation: <a class="reference external" href="http://virantha.github.io/photokeeper/html">http://virantha.github.io/photokeeper/html</a></li>
<li>Source: <a class="reference external" href="https://github.com/virantha/photokeeper">https://github.com/virantha/photokeeper</a></li>
</ul>
<div class="section" id="features">
<h2><a class="toc-backref" href="#toc-entry-1">Features</a></h2>
<ul class="simple">
<li>Sort image files (JPEG/TIFF) and video files into date-based folders (currently only YYYY-MM-DD format supported)</li>
<li>Upload images and videos to Flickr into date-based albums</li>
<li>Avoid duplication of files based on photo taken time, size, and filename</li>
</ul>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#toc-entry-2">Usage:</a></h2>
<div class="section" id="examine-files">
<h3><a class="toc-backref" href="#toc-entry-3">Examine files</a></h3>
<p>Examine the files in a given source directory (no changes or copying):</p>
<pre class="literal-block">
photokeeper SRC_DIR examine
</pre>
<p>Results in:</p>
<pre class="literal-block">
Examining 482 files in /source
100%|██████████████████████████████████████▉| 481/482 [00:08&lt;00:00, 59.88file/s]
Found images from 14 days
{   '2016-06-24': 5,
        '2016-07-02': 30,
        '2016-07-03': 12,
        '2016-07-04': 32,
        '2016-07-05': 3,
        '2016-07-21': 1,
        '2016-08-02': 20,
        '2016-08-05': 51,
        '2016-09-30': 13,
        '2016-10-09': 131,
        '2016-10-10': 46,
        '2016-10-29': 91,
        '2016-10-31': 45,
        '2016-11-06': 1}
Total images: 481
</pre>
</div>
<div class="section" id="copy-files-to-a-directory">
<h3><a class="toc-backref" href="#toc-entry-4">Copy files to a directory</a></h3>
<p>Copy the files in a given source directory to a target directory with no duplication:</p>
<pre class="literal-block">
photokeeper SRC_DIR TGT_DIR dedupe file
</pre>
</div>
<div class="section" id="upload-files-to-flickr">
<h3><a class="toc-backref" href="#toc-entry-5">Upload files to Flickr</a></h3>
<p>First, go to Flickr and get a private key at <a class="reference external" href="http://www.flickr.com/services/api/misc.api_keys.html">http://www.flickr.com/services/api/misc.api_keys.html</a></p>
<p>Then, create a directory from where you will start photokeeper, and create a file called flickr_api.yaml:</p>
<div class="highlight"><pre><span></span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;YOUR_API_KEY&quot;</span>
<span class="nt">secret</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;YOUR_API_SECRET&quot;</span>
</pre></div>
<p>Now, use the following command:</p>
<pre class="literal-block">
photokeeper SRC_DIR TGT_DIR dedupe flickr
</pre>
</div>
<div class="section" id="full-help">
<h3><a class="toc-backref" href="#toc-entry-6">Full help</a></h3>
<pre class="literal-block">
Usage:
        photokeeper.py [options] SOURCE_DIR examine
        photokeeper.py [options] SOURCE_DIR TARGET_DIR [dedupe] file
        photokeeper.py [options] SOURCE_DIR [dedupe] flickr
        photokeeper.py [options] SOURCE_DIR TARGET_DIR [dedupe] file flickr
        photokeeper.py [options] SOURCE_DIR TARGET_DIR all
        photokeeper.py --conf=FILE
        photokeeper.py -h

Arguments:
        SOURCE_DIR  Source directory of photos
        TARGET_DIR  Where to copy the image files
        all         Run all steps in the flow (examine,dedupe,flickr,file)
        examine    Examine EXIF tags
        dedupe     Only select files not already present in target directory
        flickr     Upload to flickr
        file       Copy files

Options:
        -h --help        show this message
        -v --verbose     show more information
        -d --debug       show even more information
        --conf=FILE      load options from file
</pre>
</div>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#toc-entry-7">Installation</a></h2>
<p>PhotoKeeper is currently only tested and provided for Python 3.5.  I have no
plans to backport this to Python 2.x as I am shifting all my new development to
3.x exclusively.</p>
<!-- code-block: bash

$ pip install photokeeper -->
</div>
<div class="section" id="disclaimer">
<h2><a class="toc-backref" href="#toc-entry-8">Disclaimer</a></h2>
<p>The software is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</p>
</div>

  </div>
  <div class="article_meta">
    <p>Category: <a href="https://virantha.com/category/photokeeper.html">PhotoKeeper</a></p>
    <p>Tags:
      <a href="https://virantha.com/tag/tech.html">tech</a>,      <a href="https://virantha.com/tag/photokeeper.html">photokeeper</a>,      <a href="https://virantha.com/tag/flashair.html">flashair</a>,      <a href="https://virantha.com/tag/flickr.html">flickr</a>,      <a href="https://virantha.com/tag/frame.html">frame</a>,      <a href="https://virantha.com/tag/photo.html">photo</a>,      <a href="https://virantha.com/tag/python.html">python</a>    </p>
    <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style">
        <a class="addthis_button_tweet"></a>
        <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
        <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
        <a class="addthis_counter addthis_pill_style"></a>
    </div>
    <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-533983e96da03f48"></script>
    <script type="text/javascript">
        var addthis_config = addthis_config||{};
        addthis_config.data_track_addressbar = false;
        addthis_config.data_track_clickback = false;
    </script>
    <!-- AddThis Button END -->
  </div>


    <div id="article_comments" style="display:block">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
           var disqus_identifier = "2016/11/07/photokeeper-usage-guide/";
           (function() {
           var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
           dsq.src = 'https://virantha.disqus.com/embed.js';
           (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</article>


    <div id="ending_message">
        <p>&copy; Virantha Ekanayake. Built using <a href="https://getpelican.com" target="_blank">Pelican</a>. Modified <a href='https://github.com/virantha/pelican-svbhack'>svbhack</a> theme, based on <a href="https://github.com/pR0Ps/pelican-svbhack" target="_blank">theme</a> by Carey Metcalfe</p>
    </div>
  </main>


  <script type="text/javascript">
    window.onload = function(){
      var e = document.querySelectorAll(".email");
      for (var i = 0; i < e.length; i++) {
        e[i].href = e[i].getAttribute("data-email").split("").reverse().join("");
        e[i].removeAttribute("data-email");
        e[i].removeAttribute("title");
        e[i].removeAttribute("class");
        e[i].setAttribute("class","ext-links");
      }

      $.get("https://ipinfo.io", function (response) {
        //$("#country").html(response.country);
        //response.country = "CA";
        var country_codes = { 
            "GB": { "id" : "virantha-uk-21", "url" : "www.amazon.co.uk"},
            "CA": { "id" : "virantha-ca-20", "url" : "www.amazon.ca"},
            "DE": { "id" : "virantha-de-21", "url" : "www.amazon.de"},
            "FR": { "id" : "viranthacom0c-21", "url" : "www.amazon.fr"},
            "ES": { "id" : "viranthaco0b5-21", "url" : "www.amazon.es"},
            "IT": { "id" : "viranthacom02-21", "url" : "www.amazon.it"}
        } 
        if (response.country in country_codes) {
                
            var e = document.querySelectorAll(".amazon");
            for (var i = 0; i < e.length; i++) {
                e[i].href = e[i].href.replace("www.amazon.com", country_codes[response.country]["url"]);
                e[i].href = e[i].href.replace("virantha-20", country_codes[response.country]["id"]);
                e[i].setAttribute("class","amazn");
             }
        }
        }, "jsonp"); 
    };
  </script>


<script src="https://files.stork-search.net/releases/v1.5.0/stork.js"></script>
<script>
    stork.register("sitesearch", "https://virantha.com/search-index.st");
</script>
</body>
</html>