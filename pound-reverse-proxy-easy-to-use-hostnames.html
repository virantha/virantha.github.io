<!DOCTYPE html>
<html lang="en">

<head>
      <link rel="stylesheet/less" type="text/css" href="/theme/css/style.less">
      <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/1.6.1/less.min.js" type="text/javascript"></script>

  <link rel="stylesheet" type="text/css" href="/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans|PT+Serif|Ubuntu+Mono">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css">
  <link rel="stylesheet" href="/theme/tipuesearch/tipuesearch.css">
  

  <meta charset="utf-8" />
  <meta name="viewport" id="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Virantha N. Ekanayake">
  <meta name="description" content="Technical writings by Virantha N. Ekanayake">



<meta name="keywords" content="snippet">

  <title>
Pound reverse proxy and simpler URLs for webapps (Sickbeard, Plex, CouchPotato, Headphones, SABNZBD) | Virantha's Blog  </title>

</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="">
      </a>
      <h2><a href="" class="nohover">Virantha N. Ekanayake</a></h2>
      <p>
        <form style="display: inline;" action="/search.html">
            <div style="float: center;" id="tipue_focus"><input type="text" name="q" id="tipue_search_input">
            <input class='hide' type="button" id="tipue_search_button" onclick="this.form.submit();"></div>
        </form>
      
      </p>
      <div>
          <ul>



            
            <li><a href="#" target="_blank"><span class="ext-links">You can add links in your config file</span><i class="fa fa-external-link-square "></i></a></li>



            
            <li><a href="#" target="_blank"><span class="ext-links">Another social link</span><i class="fa fa-external-link-square "></i></a></li>
            <br>
            <li><a href="https://getpelican.com/" target="_blank">Pelican<i class="fa fa-external-link-square "></i></a></li>
            <li><a href="https://www.python.org/" target="_blank">Python.org<i class="fa fa-external-link-square "></i></a></li>
            <li><a href="https://palletsprojects.com/p/jinja/" target="_blank">Jinja2<i class="fa fa-external-link-square "></i></a></li>
            <li><a href="#" target="_blank">You can modify those links in your config file<i class="fa fa-external-link-square "></i></a></li>
        </div>
<p>
<!-- AddThis Button BEGIN -->
<div class="sharing addthis_toolbox addthis_default_style addthis_16x16_style">
    <a class="addthis_button_twitter"></a>
    <a class="addthis_button_google_plusone_share"></a>
    <a class="addthis_button_facebook"></a>
    <a class="addthis_button_hackernews"></a>
    <a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style"></a>
</div>
</p>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-533983e96da03f48"></script>
<!-- AddThis Button END -->
        
      </ul>
    </div>
  </aside>

  <main id="main">
    <header>
      <p id="header">
      
      </p>
<div class='nav-class'>

    <ul>
        <li>
            <a id='head' href="">Home</a> &#124; 
            <ul>
                <li><a href='/index.html'>All posts</a></li>
                <li><a href='/'>Tags</a></li>
            </ul>
        </li>
                <li><a href=#'>Projects</a>
                <ul>                        <li><a href="/category/pypdfocr.html"> PyPDFOCR </a> </li>
                        <li><a href="/category/airframe.html"> AirFrame </a> </li>
                        <li><a href="/category/scanpdf.html"> ScanPDF </a> </li>
                        <li><a href="/category/oneresume.html"> OneResum√© </a> </li>
                        <li><a href="/category/fundsgather.html"> FundsGather </a> </li>
                        <li><a href="/category/photokeeper.html"> PhotoKeeper </a> </li>
                        <li><a href="/category/bricknil.html"> BrickNil </a> </li>
                </ul>
                </li>
                <li><a href="/category/tech.html"> Tech notes </a> </li>
                <li><a href="/category/snippets.html"> Snippets </a> </li>
                <li><a href="/category/diy.html"> DIY </a> </li>
                <li><a href="/category/shopping.html"> Shopping </a> </li>

    </ul>
</div>
<p>Posted
 by virantha
on Sat 08 March 2014 </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="/pound-reverse-proxy-easy-to-use-hostnames.html" class="nohover">Pound reverse proxy and simpler URLs for webapps (Sickbeard, Plex, CouchPotato, Headphones, SABNZBD)</a></h1>
  </div>
  <div class="article_text">
    <p>I run a plethora of local web applications that each listen on different ports, and
I wanted to simplify their URLs so I could just type a hostname to access them:</p>
<table border="1" class="docutils" id="hostnames">
<caption>Hostname mapping</caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Application</th>
<th class="head">Default URL</th>
<th class="head">Desired URL</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Sickbeard</td>
<td><a class="reference external" href="http://linux-server:8081">http://linux-server:8081</a></td>
<td><a class="reference external" href="http://sickbeard">http://sickbeard</a></td>
</tr>
<tr><td>SabNZBD</td>
<td><a class="reference external" href="http://linux-server:8080">http://linux-server:8080</a></td>
<td><a class="reference external" href="http://sabnzbd">http://sabnzbd</a></td>
</tr>
<tr><td>Nagios</td>
<td><a class="reference external" href="http://fw:1008/nagios">http://fw:1008/nagios</a></td>
<td><a class="reference external" href="http://nagios">http://nagios</a></td>
</tr>
<tr><td>Plex Media Server</td>
<td><a class="reference external" href="http://media-server:32400/web">http://media-server:32400/web</a></td>
<td><a class="reference external" href="http://plex">http://plex</a></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Turns out, this is really simple to do by installing <a class="reference external" href="http://www.apsis.ch/pound">Pound</a>, but it took me some time
to piece together how to configure it for Plex and Nagios, which have both a
port number and a path mapping.  Basically, the recipe is that you first
redirect the URL path portion, and then you do the host/port redirect. Plex has
an <a class="reference external" href="http://blog.spike.cx/post/54333726677/plex-media-server-web-proxy-fix">additional issue with some javascript</a> in the web interface that causes a
loop unless you put in a rule to detect a particular header text
(<tt class="docutils literal"><span class="pre">X-Plex-Device-Name</span></tt>) to avoid remapping the <tt class="docutils literal">/web</tt> portion of the URL.</p>
<p>Here's my <tt class="docutils literal">pound.cfg</tt> configuration file for future reference (obviously, this requires
that you've set up your DNS/hosts to point all the aliases like sickbeard, plex, etc. to
whatever host is running pound)</p>
<div class="highlight"><pre><span></span><span class="na">ListenHTTP</span>
<span class="w">        </span><span class="na">Address 192.168.9.1</span>
<span class="w">        </span><span class="na">Port 80</span>
<span class="w">        </span><span class="na">Service</span>
<span class="w">                </span><span class="na">HeadRequire &quot;Host</span><span class="o">:</span><span class="w"> </span><span class="s">.*sickbeard.*&quot;</span>
<span class="w">                </span><span class="na">BackEnd</span>
<span class="w">                        </span><span class="na">Address linux-server</span>
<span class="w">                        </span><span class="na">Port 8081</span>
<span class="w">                </span><span class="na">End</span>
<span class="w">        </span><span class="na">End</span>
<span class="w">        </span><span class="na">Service</span>
<span class="w">                </span><span class="na">HeadRequire &quot;Host</span><span class="o">:</span><span class="w"> </span><span class="s">.*sabnzbd.*&quot;</span>
<span class="w">                </span><span class="na">BackEnd</span>
<span class="w">                        </span><span class="na">Address linux-server</span>
<span class="w">                        </span><span class="na">Port 8080</span>
<span class="w">                </span><span class="na">End</span>
<span class="w">        </span><span class="na">End</span>
<span class="w">        </span><span class="na">Service</span>
<span class="w">                </span><span class="na">HeadRequire &quot;Host</span><span class="o">:</span><span class="w"> </span><span class="s">.*couchpotato.*&quot;</span>
<span class="w">                </span><span class="na">BackEnd</span>
<span class="w">                        </span><span class="na">Address linux-server</span>
<span class="w">                        </span><span class="na">Port 5050</span>
<span class="w">                </span><span class="na">End</span>
<span class="w">        </span><span class="na">End</span>
<span class="w">        </span><span class="na">Service</span>
<span class="w">                </span><span class="na">HeadRequire &quot;Host</span><span class="o">:</span><span class="w"> </span><span class="s">.*headphones.*&quot;</span>
<span class="w">                </span><span class="na">BackEnd</span>
<span class="w">                        </span><span class="na">Address linux-server</span>
<span class="w">                        </span><span class="na">Port 8181</span>
<span class="w">                </span><span class="na">End</span>
<span class="w">        </span><span class="na">End</span>

<span class="w">        </span><span class="c1"># Following two services for plex</span>
<span class="w">        </span><span class="na">Service</span>
<span class="w">                </span><span class="na">HeadRequire &quot;Host</span><span class="o">:</span><span class="w"> </span><span class="s">.*plex.*&quot;</span>
<span class="w">                </span><span class="na">HeadDeny &quot;X-Plex-Device-Name&quot;</span>
<span class="w">                </span><span class="na">URL &quot;^/$&quot;</span>
<span class="w">                </span><span class="na">Redirect &quot;http</span><span class="o">:</span><span class="s">//plex/web&quot;</span>
<span class="w">        </span><span class="na">End</span>
<span class="w">        </span><span class="na">Service</span>
<span class="w">                </span><span class="na">HeadRequire &quot;Host</span><span class="o">:</span><span class="w"> </span><span class="s">.*plex.*&quot;</span>
<span class="w">                </span><span class="na">BackEnd</span>
<span class="w">                        </span><span class="na">Address media-server</span>
<span class="w">                        </span><span class="na">Port 32400</span>
<span class="w">                </span><span class="na">End</span>
<span class="w">        </span><span class="na">End</span>

<span class="w">        </span><span class="c1"># NAGIOS</span>
<span class="w">        </span><span class="na">Service</span>
<span class="w">                </span><span class="na">HeadRequire &quot;Host</span><span class="o">:</span><span class="w"> </span><span class="s">.*nagios.*&quot;</span>
<span class="w">                </span><span class="na">URL &quot;^/$&quot;</span>
<span class="w">                </span><span class="na">Redirect &quot;http</span><span class="o">:</span><span class="s">//nagios/nagios&quot;</span>
<span class="w">        </span><span class="na">End</span>
<span class="w">        </span><span class="na">Service</span>
<span class="w">                </span><span class="na">HeadRequire &quot;Host</span><span class="o">:</span><span class="w"> </span><span class="s">.*nagios.*&quot;</span>
<span class="w">                </span><span class="na">BackEnd</span>
<span class="w">                        </span><span class="na">Address fw</span>
<span class="w">                        </span><span class="na">Port 1008</span>
<span class="w">                </span><span class="na">End</span>
<span class="w">        </span><span class="na">End</span>

<span class="na">End</span>
</pre></div>

  </div>
  <div class="article_meta">
    <p>Category: <a href="/category/snippets.html">Snippets</a></p>
    <p>Tags:
      <a href="/tag/snippet.html">snippet</a>    </p>
    <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style">
        <a class="addthis_button_tweet"></a>
        <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
        <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
        <a class="addthis_counter addthis_pill_style"></a>
    </div>
    <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-533983e96da03f48"></script>
    <script type="text/javascript">
        var addthis_config = addthis_config||{};
        addthis_config.data_track_addressbar = false;
        addthis_config.data_track_clickback = false;
    </script>
    <!-- AddThis Button END -->
  </div>

</article>


    <div id="ending_message">
        <p>&copy; Virantha N. Ekanayake. Built using <a href="https://getpelican.com" target="_blank">Pelican</a>. Modified <a href='https://github.com/virantha/pelican-svbhack'>svbhack</a> theme, based on <a href="https://github.com/pR0Ps/pelican-svbhack" target="_blank">theme</a> by Carey Metcalfe</p>
    </div>
  </main>


    <script type="text/javascript">
    if (typeof jQuery == 'undefined') {
        var script = document.createElement('script');
        script.type = "text/javascript";
        script.src = "https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js";
        document.getElementsByTagName('head')[0].appendChild(script);
    }
    </script>

</body>
</html>